# üßπ –û–¢–ß–ï–¢ –û–ß–ò–°–¢–ö–ò –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-11-02  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´**

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø:

### 1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ë–î –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ë–î `users_courses.db`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –ë–î —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (11 —Ç–∞–±–ª–∏—Ü):
  - users (—Å –ø–æ–ª—è–º–∏ surname, fst_name, sec_name, position)
  - kerberos_users (—Å –ø–æ–ª—è–º–∏ surname, fst_name, sec_name, position)
  - courses, lessons, questions, answers –∏ –¥—Ä.

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å kerberos_users:**
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –í Windows fallback —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è **–ò User, –ò KerberosUser**
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –ü—Ä–∏ Kerberos –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è KerberosUser
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –í–°–ï–ì–î–ê, –¥–∞–∂–µ –µ—Å–ª–∏ AD –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 3. **–£–±—Ä–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `init_sample_data()`
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ö–æ–¥–µ
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫—É—Ä—Å–æ–≤ –∏ —É—Ä–æ–∫–æ–≤

### 4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ cleanup:**
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** `cleanup_legacy_and_kerberos()` –±–æ–ª—å—à–µ –ù–ï –æ—á–∏—â–∞–µ—Ç kerberos_users
- ‚úÖ –£–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Ç–∞–±–ª–∏—Ü–∞ mac_users
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### 5. **–û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã `__pycache__` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ - –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã - —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: kerberos_users –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª–∞—Å—å**
- **–ü—Ä–∏—á–∏–Ω–∞:** –í Windows fallback —Å–æ–∑–¥–∞–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ User, –Ω–æ –Ω–µ KerberosUser
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ KerberosUser –≤ –±–ª–æ–∫–µ Windows fallback
- **–§–∞–π–ª:** `backend/real_kerberos_auth.py:41-140`

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: cleanup —É–¥–∞–ª—è–ª kerberos_users**
- **–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ `cleanup_legacy_and_kerberos()` –æ—á–∏—â–∞–ª kerberos_users –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- **–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ kerberos_users, —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ mac_users
- **–§–∞–π–ª:** `backend/models.py:428-436`

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –ë–î**
- **–ü—Ä–∏—á–∏–Ω–∞:** `init_sample_data()` —Å–æ–∑–¥–∞–≤–∞–ª–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫—É—Ä—Å—ã
- **–§–∞–π–ª:** `backend/models.py:448-456`

---

## üìã –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –ù–æ–≤–∞—è –ë–î —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ –í—Å–µ –ø–æ–ª—è (surname, fst_name, sec_name, position) –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ users –∏ kerberos_users
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü

### **–ö–æ–¥:**
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –±–µ–∑ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:**
- ‚úÖ –ü—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Kerberos —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è KerberosUser –∏ User
- ‚úÖ –ü—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Windows fallback —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è KerberosUser –∏ User
- ‚úÖ –°–æ–±–∏—Ä–∞—é—Ç—Å—è –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ AD
- ‚úÖ –ï—Å–ª–∏ AD –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ LDAP –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

---

## üéØ –ß–¢–û –¢–ï–ü–ï–†–¨ –ü–†–û–ò–°–•–û–î–ò–¢:

1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `kerberos_users`
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `users`
   - –ó–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è –∏–∑ AD (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

2. **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ:**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `last_login` –≤ `kerberos_users`
   - –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ AD

3. **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ AD:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ LDAP –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê:

1. ‚úÖ –ë–î —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
2. ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
3. ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
4. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
5. ‚úÖ –ù–µ—Ç –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∫—ç—à–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–û. –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**



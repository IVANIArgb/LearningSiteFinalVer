# ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `role` –≤ –æ–±–µ –ë–î

**–î–∞—Ç–∞:** 2025-11-02

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `role` –≤ –º–æ–¥–µ–ª—å User**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `role = Column(String(20), nullable=False, default='user')` –≤ `backend/models.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–µ—Ç–æ–¥ `to_dict()` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ä–æ–ª–∏ –≤ JSON
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ë–î

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `role` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `role` –≤ —Ç–∞–±–ª–∏—Ü–µ `kerberos_users` (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `create_tables()`

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- ‚úÖ –í `real_kerberos_auth.py` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ User –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ä–æ–ª—å –∏–∑ KerberosUser
- ‚úÖ –í Windows fallback —Ä–æ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ 'user' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ User —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ä–æ–ª—å –∏–∑ KerberosUser

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω endpoint `/user/info-test`**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–æ–ª–∏ –∏–∑ –ë–î (–∏–∑ KerberosUser –∏–ª–∏ User)
- ‚úÖ –†–æ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ JSON –æ—Ç–≤–µ—Ç–µ

---

## üìã –ì–î–ï –•–†–ê–ù–ò–¢–°–Ø –†–û–õ–¨:

### **–í —Ç–∞–±–ª–∏—Ü–µ `kerberos_users`:**
- –ü–æ–ª–µ `role` (VARCHAR(20), NOT NULL, DEFAULT 'user')
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –ë–î

### **–í —Ç–∞–±–ª–∏—Ü–µ `users`:**
- –ü–æ–ª–µ `role` (VARCHAR(20), NOT NULL, DEFAULT 'user')
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —Ä–æ–ª—å—é –∏–∑ `kerberos_users`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–µ—Ä–µ—Ç—Å—è –∏–∑ KerberosUser
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å KerberosUser

---

## üîÑ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –†–û–õ–ò:

1. **–ü—Ä–∏ Kerberos –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
   - –†–æ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ KerberosUser –∏–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 'user'
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ KerberosUser
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ User

2. **–ü—Ä–∏ Windows fallback:**
   - –†–æ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 'user' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ–±–µ —Ç–∞–±–ª–∏—Ü—ã

3. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:**
   - –†–æ–ª—å –∏–∑ KerberosUser —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ User

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê:

- ‚úÖ –ü–æ–ª–µ `role` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –º–æ–¥–µ–ª–∏ User
- ‚úÖ –ü–æ–ª–µ `role` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –º–æ–¥–µ–ª–∏ KerberosUser
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `role` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü—É users –≤ –ë–î
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `role` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ kerberos_users –≤ –ë–î
- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- ‚úÖ Endpoint `/user/info-test` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–æ–ª—å

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ï ROLE –î–û–ë–ê–í–õ–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢**

